<!DOCTYPE html>
<svg></svg>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://d3js.org/d3-request.v1.min.js"></script>
<script src="https://d3js.org/topojson.v3.min.js"></script>
<script src="https://d3js.org/d3-color.v1.min.js"></script>
<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://unpkg.com/jsts@1.6.1/dist/jsts.min.js"></script>
<script>
    d3.json("https://raw.githubusercontent.com/eurostat/Nuts2json/master/2016/3035/60M/3.json",
        function (error, nuts) {
            if (error) throw error;

            //prepare SVG element
            var width = 700, height = width * (nuts.bbox[3] - nuts.bbox[1]) / (nuts.bbox[2] - nuts.bbox[0]),
                svg = d3.select("svg").attr("width", width).attr("height", height),
                path = d3.geoPath().projection(d3.geoIdentity()
                    .reflectY(true).fitSize([width, height], topojson.feature(nuts, nuts.objects.gra)));

            //jsts reader and writer
            var reader = new jsts.io.GeoJSONReader();
            var writer = new jsts.io.GeoJSONWriter();
            var buffer = function(geom, dist) {
                var buffer = reader.read(geom).buffer(dist);
                    return writer.write(buffer);
            };

            //get data
            //country regions
            var cnts = topojson.feature(nuts, nuts.objects.cntrg).features;
            //NUTS regions
            var nutsrg = topojson.feature(nuts, nuts.objects.nutsrg).features;

            //draw buffers
            for(var i=0; i<=1; i+=0.2)
            (function(i){
                var col = d3.interpolateBlues(i);
                svg.append("g").selectAll("path").data(cnts)
                .enter().append("path").attr("d", function (cnt) {
                    return path(buffer(cnt.geometry, i*300000));
                }).style("fill", col);
                svg.append("g").selectAll("path").data(nutsrg)
                .enter().append("path").attr("d", function (cnt) {
                    return path(buffer(cnt.geometry, i*300000));
                }).style("fill", col);
            })(i);


            //draw regions
            //countries
            svg.append("g").selectAll("path").data(cnts)
                .enter().append("path").attr("d", path).attr("class", "cntrg");

            //nuts
            svg.append("g").selectAll("path").data(nutsrg)
                .enter().append("path").attr("d", path).attr("class", "nutsrg");

        });
</script>
