<!DOCTYPE html>
<svg></svg>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://d3js.org/d3-request.v1.min.js"></script>
<script src="https://d3js.org/topojson.v3.min.js"></script>
<script src="https://d3js.org/d3-color.v1.min.js"></script>
<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script>
    d3.json("https://raw.githubusercontent.com/eurostat/Nuts2json/master/2016/3035/60M/0.json",
        function (error, nuts) {
            if (error) throw error;

            //prepare SVG element
            var width = 700, height = width * (nuts.bbox[3] - nuts.bbox[1]) / (nuts.bbox[2] - nuts.bbox[0]),
                svg = d3.select("svg").attr("width", width).attr("height", height),
                path = d3.geoPath().projection(d3.geoIdentity()
                    .reflectY(true).fitSize([width, height], topojson.feature(nuts, nuts.objects.gra)));

            //draw coastal margin
            for (var i = 1; i >= 0; i -= 0.1) {
                var col = d3.interpolateBlues(1 - i);
                var sw = i*200;
                //countries
                svg.append("g").selectAll("path").data(topojson.feature(nuts, nuts.objects.cntbn).features)
                    .enter().append("path").filter(function(bn){ return bn.properties.co === 'T'; }).attr("d", path)
                    .style("fill","none")
                    .style("stroke-width",sw+"px")
                    .style("stroke",col)
                    //TODO bn cap_join and cap_end
                    ;
                //nuts
                svg.append("g").selectAll("path").data(topojson.feature(nuts, nuts.objects.nutsbn).features)
                    .enter().append("path").filter(function(bn){ return bn.properties.co === 'T'; }).attr("d", path)
                    .style("fill","none")
                    .style("stroke-width",sw+"px")
                    .style("stroke",col)
                    ;
            }

            //draw graticule
            svg.append("g").selectAll("path").data(topojson.feature(nuts, nuts.objects.gra).features)
                .enter().append("path").attr("d", path).attr("class", "graticule");

            //draw regions
            //countries
            svg.append("g").selectAll("path").data(topojson.feature(nuts, nuts.objects.cntrg).features)
                .enter().append("path").attr("d", path).attr("class", "cntrg");

            //nuts
            svg.append("g").selectAll("path").data(topojson.feature(nuts, nuts.objects.nutsrg).features)
                .enter().append("path").attr("d", path).attr("class", "nutsrg");

            //draw boundaries
            //countries
            svg.append("g").selectAll("path").data(topojson.feature(nuts, nuts.objects.cntbn).features)
                .enter().append("path").attr("d", path)
                .attr("class", function (bn) { return "cntbn" + (bn.properties.co === "T" ? " coastal" : ""); });
            //nuts
            svg.append("g").selectAll("path").data(topojson.feature(nuts, nuts.objects.nutsbn).features)
                .enter().append("path").attr("d", path)
                .attr("class", function (bn) {
                    return "nutsbn" + (bn.properties.co === "T" ? " coastal" : "")
                        + ((bn.properties.oth === "T" || bn.properties.lvl == 0) ? " white" : "")
                        + (bn.properties.lvl == 3 ? " thin" : "");
                });

        });
</script>